# file_entropy.py
# http://code.activestate.com/recipes/577476-shannon-entropy-calculation/#c4
#
# Shannon Entropy of a file
# = minimum average number of bits per character
# required for encoding (compressing) the file
#
# So the theoretical limit (in bytes) for data compression:
# Shannon Entropy of the file * file size (in bytes) / 8
# (Assuming the file is a string of byte-size (UTF-8?) characters
# because if not then the Shannon Entropy value would be different.)
# FB - 201011291
import math
useString = True
origText = "At London in Englonde noʒt fulle longe sythen Sythen Crist suffride on crosse and Cristendome stabylde, Ther was a byschop in þat burghe, blessyd and sacryd; Saynt Erkenwolde as I hope þat holy mon hatte. In his tyme in þat toun þe temple aldergrattyst Was drawen doun, þat one dole, to dedifie new, For hit hethen had bene in Hengyst dawes þat þe Saxones unsaʒt haden sende hyder. þai bete oute þe Bretons and broʒt hom into Wales And pervertyd alle þe pepul þat in þat place dwellide. þen wos this reame renaide mony ronke ʒeres, Til Saynt Austyn into Sandewiche was sende fro þe pope. þen prechyd he here þe pure faythe and plantyd þe trouthe, And convertyd all þe communnates to Cristendame newe. He turnyd temples þat tyme þat temyd to þe develle, And clansyd hom in Cristes nome and kyrkes hom callid; He hurlyd owt hor ydols and hade hym in sayntes, And chaungit chevely hor nomes and chargit hom better; þat ere was of Appolyn is now Saynt Petre, Mahon to Saynt Margrete oþer to Maudelayne, þe Synagoge of þe Sonne was sett to oure Lady, Jubiter and Jono to Jhesu oþer to James. So he hom dedifiet and dyght all to dere halowes þat ere wos sett of Sathanas in Saxones tyme. Now þat London is nevenyd hatte þe New Troie, þe metropol and þe mayster-toun hit evermore has bene. þe mecul mynster þerinne a maghty devel aght, And þe title of þe temple bitan was his name, For he was dryghtyn derrest of ydols praysid And þe solempnest of his sacrifices in Saxon londes. þe thrid temple hit wos tolde of Triapolitanes: By alle Bretaynes bonkes were bot othire twayne. Now of þis Augustynes art is Erkenwolde bischop At love London toun and the laghe teches, Syttes semely in þe sege of Saynt Paule mynster þat was þe temple Triapolitan as I tolde are. þen was hit abatyd and beten doun and buggyed efte new, A noble note for þe nones and New Werke hit hatte. Mony a mery mason was made þer to wyrke, Harde stones for to hewe with eggit toles, Mony grubber in grete þe grounde for to seche þat þe fundement on fyrst shuld þe fote halde; And as þai makkyde and mynyde a mervayle þai founden As ʒet in crafty cronecles is kydde þe memorie, For as þai dyʒt and dalfe so depe into þe erthe þai founden fourmyt on flore a ferly faire toumbe; Hit was a throghe of thykke ston thryvandly hewen, With gargeles garnysht aboute alle of gray marbre. Thre sperle of þe spelunke þat spradde hit olofte Was metely made of þe marbre and menskefully planede And þe bordure enbelicit with bryʒt golde lettres; Bot roynyshe were þe resones þat þer on row stoden. Full verray were þe vigures, þer avisyd hom mony, Bot alle muset hit to mouthe and quat hit mene shulde; Mony clerke in þat clos with crownes ful brode þer besiet hom aboute noʒt to brynge hom in wordes. Quen tithynges token to þe toun of þe toumbe-wonder Mony hundrid hende men highide þider sone; Burgeys boghit þerto, bedels ande othire, And mony a mesters mon of manners dyverse; Laddes laften hor werke and lepen þiderwardes, Ronnen radly in route with ryngande noyce; þer commen pider of all kynnes so kenely mony þat as alle þe worlde were þider walon within a hondequile. Quen þe maire with his meynye þat mervaile aspied, By assent of þe sextene þe sayntuare þai kepten, Bede unlouke þe lidde and lay hit byside; þai wolde loke on þat lome quat lengyd withinne. Wyʒt werkemen with þat wenten þertille, Putten prises þerto, pinchid one-under, Kaghten by þe corners with crowes of yrne, And were þe lydde never so large þai laide hit by sone. Bot þen wos wonder to wale on wehes þat stoden That myʒt not come to to knowe a quontyse strange So was þe glode within gay, al with golde payntyde, And a blisfulle body opon þe bothum lyggid, Araide on a riche wise in rialle wedes. Al with glisnande golde his gowne wos hemmyd, With mony a precious perle picchit þeron, And a gurdille of golde bigripid his mydelle; A meche mantel on lofte with menyver furrit, þe clothe of camelyn ful clene with cumly bordures; And on his coyfe wos kest a coron ful riche And a semely septure sett in his honde. Als wemles were his wedes withouten any tecche oþer of moulynge oþer of motes oþer moght-freten, And als bryʒt of hor blee in blysnande hewes As þai hade ʒepely in þat ʒorde bene ʒisturday shapen; And als freshe hym þe face and the fleshe nakyde Bi his eres and bi his hondes þat openly shewid With ronke rode as þe rose and two rede lippes, As he in sounde sodanly were slippide opon slepe. þer was spedeles space to spyr uch on oþer Quat body hit myʒt be þat buried wos ther, How longe had he þer layne, his lere so unchaungit, And al his wede unwemmyd? þus ylka weghe askyd. 'Hit myʒt not be bot suche a mon in myde stode longe. He has ben kynge of þis kithe, as couthely hit semes, He lyes dolven þus depe; hit is a derfe wonder Bot summe segge couthe say þat he hym sene hade.' Bot þat ilke note wos noght, for nourne none couthe, Noþer by title ne token ne by tale noþer, þat euer wos brevyt in burghe ne in boko notyde þat ever mynnyd suche a more, more ne lasse. þe bodeworde to þe byschop was broght on a quile Of þat buriede body al þe bolde wonder. þe primate with his prelacie was partyd fro home, In Esex was Sir Erkenwolde an abbay to visite. Tulkes tolden hym þe tale with troubulle in þe pepul And suche a cry aboute a cors crakit evermore; The bischop sende hit to blynne by bedels and lettres And buskyd þiderwarde bytyme on his blonke after. By þat he come to þe kyrke kydde of Saynt Paule, Mony hym metten on þat meere þe mervayle to telle; He passyd into his palais and pes he comaundit And devoydit fro þe dede and ditte þe durre after. þe derke nyʒt overdrofe and day-belle ronge, And Sir Erkenwolde was up in þe ughten ere þen, þat welneghe al þe nyʒt hade nattyd his houres To biseche his soverayn of his swete grace To vouchesafe to revele hym hit by a vison or elles. 'þaghe I be unworthi,' al wepande he sayde, 'Thurghe his deere debonerte digne hit my Lorde: In confirmynge þi Cristen faithe, fulsen me to kenne þe mysterie of þis mervaile þat men opon wondres.' And so longe he grette after grace þat he graunte hade, An ansuare of þe Holy Goste, and afterwarde hit dawid. Mynster-dores were makyd opon quen matens were songen; þe byschop hym shope solemply to synge þe heghe masse. þe prelate in pontificals was prestly atyride, Manerly with his ministres þe masse he begynnes Of Spiritus Domini for his spede on sutile wise, With queme questis of þe quere with ful quaynt notes. Mony a gay grete lorde was gedrid to herken hit, As þe rekenest of þe reame repairen þider ofte, Tille cessyd was þe service and sayde þe later ende; þen heldyt fro þe autere all þe hegh gynge. þe prelate passide on þe playn, þer plied to hym lordes, As riche revestid as he was he rayked to þe toumbe; Men unclosid hym þe cloyster with clustrede keies, Bot pyne wos with þe grete prece þat passyd hym after. The byschop come to þe burynes, him barones besyde, þe maire with mony maʒti men and macers before hym. þe dene of þe dere place devysit al on fyrst, þe fyndynge of þat ferly with fynger he mynte. 'Lo, lordes,' quoþ þat lede, 'suche a lyche here is Has layn loken here on loghe, how longe is unknawen; and ʒet his colour and his clothe has caʒt no defaute, Ne his lire ne þe lome þat he is layde inne. þer is no lede opon lyfe of so longe age þat may mene in his mynde þat suche amon regnyd, Ne noþer his nome ne his note nourne of one speche; Queþer mony porer in þis place is putte into grave þat merkid is in oure martilage his mynde for ever; And we have oure librarie laitid þes longe seven dayes, Bot one cronicle of þis kyng con we never fynde. He has non layne here so longe, to loke hit by kynde, To malte so out of memorie bot mervayle hit were.' 'þou says soþe,' quod þe segge þat sacrid was byschop, 'Hit is mervaile to men, þat mountes to litelle Towarde þe providens of þe prince þat paradis weldes, Quen hym luste to unlouke þe leste of his myʒtes. Bot quen matyd is monnes myʒt and his mynde passyde, And al his resons are torent and redeles he stondes, þen lettes hit hym ful litelle to louse wyt a fynger þat all þe hondes under heven halde myʒt never. þere as creatures crafte of counselle oute swarves, þe comforthe of þe creatore byhoves þe cure take. And so do we now oure dede, devyne we no fyrre; To seche þe soth at oureselfe ʒee se þer no bote; Bot glow we alle opon Godde and his grace aske, þat careles is of counselle and comforthe to sende, Anande þat in fastynge of ʒour faithe and of fyne bileve. I shal avay ʒow so verrayly of vertues his þat ʒe may leve upon longe þat he is lord myʒty And fayne ʒour talent to fulfille if ʒe hym frende leves.' Then he turnes to þe toumbe and talkes to þe corce, Lyftande up his egh-lyddes he loused suche wordes: 'Now, lykhame þat þou lies, layne þou no lenger! Sythen Jhesus has juggit today his joy to be schewyde, Be þou bone to his bode, I bydde in his behalve; As he was bende on a beme quen he his blode schedde, As þou hit wost wyterly and we hit wele leven, Ansuare here to my sawe, councele no trouthe! Sithen we wot not qwo þou art, witere us þiselwen In worlde quat weghe þou was and quy þow þus ligges, How longe þou has layne here and quat laghe þou usyt, Queþer art þou joyned to joy oþer juggid to pyne.' Quen þe segge hade þus sayde and syked þerafter, þe bryʒt body in þe burynes brayed a litelle, And with a drery dreme be dryves owte wordes þurghe sum lant goste-lyfe of hym þat al redes. 'Bisshop,' quod þis ilke body, 'þi bode is me dere; I may not bot boghe to þi bone for bothe myn eghen. þe name þat þou nevenyd has and nournet me after Al heven and helle heldes to and erthe bitwene. fyrst to say the þe sothe quo myselfe were: One þe unhapnest hathel þat ever on erth ʒode, Never kyng ne cayser ne ʒet no knyʒt nothyre, Bot a lede of þe lagh þat þen þis londe usit. I was committid and made a mayster-mon here To sytte upon sayd causes; þis cité I ʒemyed Under a prince of parage of paynymes laghe, And uche segge þat him sewide þe same faythe trowid. þe lengthe of my lyinge here þat is a lewid date, Hit to meche to any mon to make of a nombre. After þat Brutus þis burghe had buggid on fyrste, Noʒt bot fife hundred ʒere þer aghtene wontyd Before þat kynned ʒour Criste by Cristen acounte: A þousand ʒere and þritty mo and ʒet threnen aght. I was an heire of an oye in þe New Troie In þe regne of þe riche kynge þat rewlit us þen, The bolde Breton Sir Belyn - Sir Berynge was his brothire; Mony one was þe busmare boden hom bitwene For hor wrakeful werre quil hor wrath lastyd. þen was I juge here enjoynyd in gentil lawe.' Quil he in spelunke þus spake, þer sprange in þe pepulle In al þis worlde no worde ne wakenyd no noice, Bot al as stille as þe ston stoden and listonde With meche wonder forwrast, and wepid ful mony. The bisshop biddes þat body: 'Biknowe þe cause, Sithen þou was kidde for no kynge, quy þou þe croun weres. Quy haldes þou so hegh in honde þe septre And hades no londe of lege men ne life ne lym aghtes?' 'Dere sir,' quod þe dede body, 'debyse þe I thenke, Al was hit never my wille þat wroght þus hit were. I was deputate and domesmon under a duke noble, And in my power þis place was putte altogeder I justifiet þis joly toun on gentil wise And ever in fourme of gode faithe, more þen fourty wynter. þe folke was felonse and fals and frowarde to reule - I hent harmes ful ofte to holde hom to riʒt; Bot for wothe ne wele, ne wrathe ne drede, Ne for maystrie ne for mede, ne for no monnes aghe, I remewit never fro þe riʒt by reson myn awen For to dresse a wrange dome, no day of my lyve, Declynet never my consciens for covetise on erthe In no gynful jugement no japes to make, Were a renke never so riche, for reverens sake; Ne for no monnes manas, ne meschefe ne routhe, Non gete me fro þe heghe gate to glent out of ryʒt Als ferforthe as my faithe confourmyd my hert. Þaghe had bene my fader bone, I bede hym no wranges, Ne fals favour to my fader, þaghe fell hym be hongyt. And for I was ryʒtwis and reken and redy of þe laghe, Quen I deghed for dul denyed all Troye; Alle menyd my dethe, þe more and the lasse, And þus to bounty my body þai buriet in golde, Cladden me for þe curtest þat courte couthe þen holde, In mantel for þe mekest and monlokest on benche, Gurden me for þe governour and graythist of Troie, Furrid me for þe fynest of faith me wtinne. For þe honour of myn honeste of heghest enprise þai coronyd me þe kidde kynge of kene justises þer ever wos tronyd in Troye oþer trowid ever shulde, And for I rewardid ever riʒt þai raght me the septre.' þe bisshop baythes hym ʒet with bale at his hert, þaghe men menskid him so, how hit myʒt worthe þat his clothes were so clene. 'In cloutes, me thynkes, Hom burde have rotid and bene rent in rattes longe sythen. þi body may be enbawmyd, hit bashis me noght þat hit thar ryve no rote ne no ronke wormes; Bot þi coloure ne þi clothe - I know in no wise How hit myʒt lye by monnes lore and last so longe.' 'Nay, bisshop,' quod þat body, 'enbawmyd wos I never, Ne no monnes counselle my cloth has kepyd unwemmyd, Bot þe riche kynge of reson, þat riʒt ever alowes And loves al þe lawes lely þat longen to trouthe; And moste he menskes men for mynnynge of riʒtes þen for al þe meritorie medes þat men on molde usen; And if renkes for riʒt þus me arayed has, He has lant me to last þat loves ryʒt best.' 'ʒea, bot sayes þou of þi saule' þen sayd þe bisshop; 'Quere is ho stablid and stadde, if þou so streʒt wroghtes? He þat rewardes uche a renke as he has riʒt servyd Myʒt evel forgo the to gyfe of his grace summe brawnche. For as he says in his sothe psalmyde writtes: þe skilfulle and þe unskathely skelton ay to me. Forþi say me of þi soule, in sele quere ho wonnes, And of þe riche restorment þat raʒt hyr oure Lorde.' þen hummyd he þat þer lay and his hedde waggyd, And gefe a gronynge ful grete and to Godde sayde: 'Maʒty maker of men, thi myghtes are grete; How myʒt þi mercy to me amounte any tyme? Nas I a paynym unpreste þat never thi plite knewe, Ne þ9 mesure of þi mercy ne þi mecul vertue, Bot ay a freke faitheles þat faylid þi laghes þat ever þou, Lord, wos lovyd in? Allas þe harde stoundes! I was non of þe nombre þat þou with noy boghtes With þe blode of thi body upon þe blo rode. Quen þou herghdes helle-hole and hentes hom þeroute, þi loffynge oute of limbo, þou laftes me þer, And þer sittes my soule þat se may no fyrre, Dwynande in þe derke dethe þat dyʒt us oure fader, Adam oure alder, þat ete of þat appulle þat mony a plyʒtles pepul has poysned for ever. ʒe were entouchid with his tethe and take in þe glotte, Bot mendyd with a mendecyn ʒe are made for to lyvye - þat is fulloght in fonte with faitheful bileve, And þat han we myste alle merciles, myselfe and my soule. Quat wan we with oure wele-dede þat wroghtyn ay riʒt, Quen we are dampnyd dulfully into þe depe lake, And exilid fro þat soper so, þat solempne fest, þer richely hit arne refetyd þat after right hungride? My soule may sitte þer in sorow and sike ful colde, Dynly in þat derke dethe þer dawes never morowen, Hungrie inwith helle-hole, and herken after meeles Longe er ho þat soper se oþer segge hyr to lathe.' þus dulfully þis dede body devisyt hit sorowe þat alle wepyd for woo þe wordes þat herden, And þe bysshop balefully bere doun his eghen, þat hade no space to speke, so spakly he ʒoskyd, Til he toke hym a tome and to þe toumbe lokyd, To þe liche þer hit lay, with lavande teres. 'Oure Lord lene', quod þat lede, 'þat þou lyfe hades, By Goddes leve, as longe as I myʒt lacche water, And cast upon þi faire cors and carpe þes wordes, I folwe þe in þe Fader nome and his fre Childes And of þe gracious Holy Goste , and Not one grue lenger. þen þof þou droppyd doun dede, hit daungere me lasse.' With þat worde þat he warpyd, þe wete of eghen And teres trillyd adoun and on þe toumbe lighten, And one felle on his face, and þe freke syked. þen sayd he with a sadde soun: 'Oure Savyoure be lovyd! Now herid be þou, heghe God, and þi hende Moder, And blissid be þat blisful houre þat ho the bere in! And also be þou, bysshop, þe bote of my sorowe And þe relefe of þe lodely lures þat my soule has levyed in! For þe wordes þat þou werpe and þe water þat þou sheddes, þe bryʒt bourne of þin eghen, my bapteme is worthyn. þe fyrst slent þat on me slode slekkyd al my tene; ryʒt now to soper my soule is sette at þe table. For with þe wordes and þe water þat wesche us of payne, Liʒtly lasshit þer a leme loghe in þe abyme þat spakly sprent my spyrit with unsparid murthe Into þe cenacle solemply þer soupen all trewe; And þer a marcialle hyr mette with menske aldergrattest, And with reverence a rowme he raʒt hyr for ever. I heere þerof my heghe God and also þe, bysshop, Fro bale has broʒt us to blis, blessid þou worthe!’ Wyt this cessyd his sowne, sayd he no more, Bot sodenly his swete chere swyndid and faylide And all the blee of his body wos blakke as þe moldes, As roten as þe rottok þat rises in powdere. For as sone as þe soule was sesyd in blisse, Corrupt was þat oþer crafte þat covert þe bones, For þe ay-lastande life þat lethe shall never Devoydes uche a vayneglorie þat vayles so litelle. þen wos lovynge oure Lord with loves uphalden, Meche mournynge and myrthe was mellyd togeder. þai passyd forthe in procession and alle þe pepulle folowid, And all þe belles in þe burghe beryd at ones. "
regText = "At London in Englonde noʒt fulle longe syþen syþen kryst suffred on crosse and Cristendome stabled, Ther was a byschop in þat burghe, blessyd and sakred; Saynt Erkenwolde as I hope þat holy mon hatte. In his tyme in þat toun þe temple alþer grattest Was drawen doun, þat one dole, to dedifie nwe, For hit hethen had bene in Hengyst dawes þat þe Saxones vnsaʒt haden sende hyder. þai bete out þe Bretons and broʒt hom into waleʒ And pervertyd alle þe peple þat in þat place dwellide. þen wos this reme renayed mony ronk ʒeres, Til Saynt Austyn into Sandewiche as send fro þe pope. þen prechyd he here þe pure faythe and planted þe trawthe, And convertyd all þe communnates to Cristendame newe. He turned temples þat tyme þat temyd to þe develle, And Clansyd hom in Cristes nome and kyrkes hom called; He hurled out hor ydols and hade hym in saynteʒ, And chaunged chevely hor nameʒ and chaunged hom better; þat er was of Appolyn is now Saynt Peter, Mahoun to Saynt Margrete oþer to Maudelayne, þe Synagoge of þe sunne was sett to oure Lady, Jubiter and Jono to Jesu oþer to James. So he hom dedifiet and dyʒt all to dere haloweʒ þat er wos sett of satanas in Saxones tyme. Now þat London is nevenyd hatte þe nwe troye, þe metropol and þe mayster toun hit euer more has bene. þe mukel mynster þerinne a maʒty devel aʒt, And þe tytle of þe temple bitan was his name, For he was dryʒten derrest of ydols praysed And þe solempnest of his sacrifices in Saxon londes. þe thrid temple hit wos tolde of Triapolitanes: By alle Bretaynes bonkeʒ were bot othire tweyne. Now of þis Augustynes art is Erkenwolde bischop At luf London toun and the lawe techeʒ, Syttes semly in þe sege of Saynt poule mynster þat was þe temple Triapolitan as I tolde are. þen was hit abated and beten doun and buggyed efte nwe, A noble note for þe noneʒ and nwe Werke hit hatte. Mony a myry mason was made þer to wyrke, Harde stones for to hewe with eggit toles, Mony grubber in grete þe grounde for to seche þat þe fundament on fyrst shuld þe fote halde; And as þai makkyde and mynyde a meruayle þai founden As ʒet in crafty cronecles is kydde þe memorie, For as þai dyʒt and dalfe so depe into þe erthe þai founden formed on flore a ferly fayre toumbe; Hit was a throghe of thykke ston þryuandely hewen, With gargeles garnyst aboute alle of gray marbre. The sperle of þe spelunke þat spradde hit alofte Was metely made of þe marbre and menskefully planed And þe bordure enbelicit with bryʒt golde lettres; Bot runisch were þe resones þat þer on rowe standen. Full verray were þe figures, þer avisyd hom mony, Bot all mused hit to mouth and quat hit mene shulde; Mony clerke in þat clos with crownes ful brode þer bisied hom aboute noʒt to bryng hom in wordes. Quen tyþyngeʒ token to þe toun of þe toumbe wonder Mony hundreth hende men hyʒed þider sone; Burgeys bowed þerto, bedels and othire, And mony a mesters mon of manners dyverse; Laddes laften hor werke and lopen þiderwardes, runnen radly in route with ryngande noyse; þer commen pider of all kynnes so kenely mony þat as alle þe worlde were þider walon within a hondewhyle. Quen þe maire with his meyny þat meruayle asspyed, By asent of þe sextene þe sayntuaré þai keped, Bede vnlouke þe lidde and lay hit byside; þai wolde loke on þat lome quat lenged withinne. Wyʒt werkemen with þat wenten þer tylle, Putten prises þerto, pinchid anvnder, kaʒten by þe corners with crowes of yrne, And were þe lydde neuer so large þai layde hit by sone. But þen wos wonder to wale on wyʒeʒ þat standen That myʒt not com to to knowe a koyntyse strange So was þe glode within gay, al with golde paynted, And a blyssfull body opon þe bothem lyggid, arayed on a ryche wyse in ryal wedes. Al with glysnande golde his goune wos hemmyd, With mony a precious perle pyʒt þeron, And a gordel of golde bigripid his mydelle; A much mantyle on lofte with menyver furred, þe clothe of camelyn ful clene with cumly bordures; And on his coyfe wos kest a coron ful ryche And a semly septure sett in his honde. Als wemleʒ were his wedes withouten any teche oþer of moulynge oþer of motes oþer moght freten, And als bryʒt of hor ble in blysnande hewes As þai hade ʒeply in þat ʒorde bene ʒisterday schapen; And als freshe hym þe face and the flesch naked Bi his eres and bi his hondes þat openly schewed With ronk rode as þe rose and two rede lyppeʒ, As he in sounde sodanly were slypped opon slepe. þer was spedeles space to spyr vschon oþer Quat body hit myʒt be þat buried wos ther, How longe had he þer layne, his lere so vnchaungit, And al his wede vnwemmyd? þus ilke wyʒe askyd. 'Hit myʒt not be bot suche a mon in myde stod longe. He has ben kyng of þis kyth, as couthely hit semeʒ, He lyes dolven þus depe; hit is a derfe wonder Bot summe segge couthe say þat he hym sene hade.' Bot þat ilke note wos noght, for norne none couthe, nawþer by tytle ne token ne by tale nawþer, þat euer wos breued in burgh ne in boke noted þat euer mynned suche a mon, more ne lasse. þe bodeworde to þe byschop was broʒt on a quyle Of þat buriede body al þe bolde wonder. þe prymate with his prelacie was parted fro home, In Esex was Sir Erkenwolde an abbay to visite. Tulkes tolden hym þe tale with troubulle in þe peple And suche a cry aboute a cors crakit euer more; The bischop sende hit to blynne by bedels and lettres And busked þiderwarde bytyme on his blonk after. By þat he com to þe kyrke kydde of Saynt poule, Mony hym metten on þat meere þe meruayle to telle; He passed into his palays and pes he comaunded And devoydit fro þe dede and dit þe dor after. þe derke nyʒt overdrofe and day belle ronge, And Sir Erkenwolde was vp in þe vʒten er þen, þat welneghe al þe nyʒt hade nayted his houreʒ To biseche his souerayn of his swete grace To vouchesafe to revele hym hit by a vysyoun or elles. 'þagh I be vnworthi,' al wepande he sayde, 'Thurghe his deere debonerte digne hit my Lorde: In confirmynge þi krysten fayth, fulsun me to kenne þe mystery of þis meruayle þat men opon wondres.' And so longe he gret after grace þat he graunte hade, An ansuare of þe Holy Goste, and afterwarde hit dawid. Mynster dores were made vpon quen matynnes were songen; þe byschop hym schop solemply to synge þe hyʒe masse. þe prelate in pontificals was prestly atyride, Manerly with his ministres þe masse he begynnes Of Spiritus Domini for his spede on sotyle wyse, With queme questis of þe quere with ful quaynt notes. Mony a gay grete lorde was gedered to herken hit, As þe rekenest of þe reme repayre þider ofte, Tille sesed was þe service and sayde þe later ende; þen heldet fro þe autere all þe hyʒe gynge. þe prelate passed on þe playn, þer plyed to hym lordes, As ryche revestid as he was he rayked to þe toumbe; Men vnclosed hym þe cloyster with clustered keyes, Bot pyne wos with þe grete prece þat passed hym after. The byschop com to þe burynes, him barones besyde, þe maire with mony maʒty men and macers bifore hym. þe dene of þe dere place deuised al on fyrst, þe fyndyng of þat ferly with fynger he mynte. 'Lo, lordes,' quod þat lede, 'suche a lyche here is Has layne loken here on loghe, how longe is vnknawen; and ʒet his colout and his clothe has caʒt no defaute, Ne his lyre ne þe lome þat he is layde inne. þer is no lede opon lyf of so longe age þat may mene in his mynde þat suche a mon regnyd, Ne nawþer his nome ne his note norne of one speche; wheþer mony porer in þis place is put into grave þat merked is in oure martilage his mynde for euer; And we have oure librarie layted þed longe seuen dayes, Bot one cronicle of þis kyng con we neuer fynde. He has non layne here so longe, to loke hit by kynde, To malte so out of memorie bot meruayle hit were.' 'þou says soþe,' quod þe segge þat sakred was byschop, 'Hit is meruayle to men, þat mountes to litelle Towarde þe providens of þe prynce þat paradis weldes, Quen hym lyst to vnlouke þe lest of his myʒtes. Bot quen matyd is monnes myʒt and his mynde passed, And al his resons are torent and redles he stondes, þen lettes hit hym ful litelle to louse wyt a fynger þat all þe hondes vnder heuen halde myʒt neuer. þere as creatures crafte of counselle out swarves, þe comfort of þe creator byhoves þe cure take. And so do we now oure dede, deuine we no fyrre; To seche þe soth at oureselfe ʒee se þer no bote; Bot glow we alle opon Godde and his grace aske, þat careles is of counselle and comfort to sende, And þat in fastynge of ʒour fayth and of fyne bileve. I shal avay ʒow so verayly of vertues his þat ʒe may leue vpon longe þat he is lorde maʒty And fayn ʒour talent to fulfylle if ʒe hym frende leueʒ.' Then he turnes to þe toumbe and talkeʒ to þe corse, Lyftande vp his yʒe lyddeʒ he loused suche wordes: 'Now, lykhame þat þou lies, layne þou no lenger! syþen Jesus has iugged today his ioy to be schewyde, Be þou boun to his bode, I bydde in his behalve; As he was bende on a bem quen he his blod schede, As þou hit wost wyterly and we hit wele leuen, Ansuare here to my sawe, councele no trawthe! syþen we wot not quo þou art, witere vs þiselwen In worlde quat wyʒe þou was and quy þow þus lyggeʒ, How longe þou has layne here and quat lawe þou vsed, wheþer art þou ioyned to ioy oþer iugged to pyne.' Quen þe segge hade þus sayde and syked þerafter, þe bryʒt body in þe buryes brayed a litelle, And with a drwry dreme be dryves owte wordes þurgh sum lent goste lyf of hym þat al redes. 'Bisshop,' quod þis ilke body, 'þi bode is me dere; I may not bot boghe to þi bone for bothe myn yʒen. þe name þat þou nevenyd has and nurned me after Al heuen and helle heldeʒ to and erthe bitwene. fyrst to say the þe sothe quo myselfe were: One þe vnhapnest hathel þat euer on erth ʒod, neuer kyng ne cayser ne ʒet no knyʒt nawþer, Bot a lede of þe lawe þat þen þis londe vsed. I was committid and made a mayster mon here To sytte vpon sayd causeʒ; þis cité I ʒemed vnder a prynce of parage of paynymes lawe, And uche segge þat him sued þe same fayth trawed. þe lenþe of my lyinge here þat is a lewed date, Hit to much to any mon to make of a noumbre. After þat Brutus þis burghe had buggid on fyrste, Noʒt bot fife hundreth ʒere þer aghtene wonted bifore þat kynned ʒour kryst by krysten acounte: A þousand ʒere and þretty mo and ʒet threnen aʒt. I was an heire of an oye in þe nwe troye In þe regne of þe ryche kyng þat rewled vs þen, The bolde Breton Sir Belyn Sir Berynge was his brothire; Mony one was þe busmar boden hom bitwene For hor wrakful werre quyl hor wrath lastyd. þen was I iugge here enioynyd in gentyl lawe.' quyl he in spelunke þus speke, þer sprang in þe peple In al þis worlde no worde ne wakned no noyse, Bot al as stylle as þe ston standen and lystened With much wonder forwrast, and weped ful mony. The bisshop biddes þat body: 'Biknowe þe cause, syþen þou was kidde for no kyng, quy þou þe croun wereʒ. Quy haldes þou so hyʒe in honde þe septre And hades no londe of lege men ne lyf ne lym aʒt?' 'Dere sir,' quod þe dede body, 'debyse þe I thenke, Al was hit neuer my wylle þat wroʒt þus hit were. I was deputate and domesmon vnder a duk noble, And in my power þis place was put altogeder I justyfyet þis joly toun on gentyl wyse And euer in fourme of gode faythe, more þen forty wynter. þe folk was felonse and fals and frowarde to rule I hent harmeʒ ful ofte to holde hom to ryʒt; Bot for wothe ne wele, ne wrath ne drede, Ne for maystery ne for mede, ne for no monnes aghe, I remewit neuer fro þe ryʒt by resoun myn awen For to dresse a wrange dome, no day of my lyf, Declynet neuer my consciens for covetyse on erthe In no gynful iuggement no iapeʒ to make, Were a renk neuer so ryche, for reuerens sake; Ne for no monnes manace, ne meschef ne rauthe, Non gete me fro þe hyʒe gate to glent out of ryʒt Als ferforthe as my fayth confourmyd my hert. þaghe had bene my fader bone, I bede hym no wranges, Ne fals fauour to my fader, þaghe fell hym be hongyt. And for I was rytʒwys and reken and redy of þe lawe, Quen I dyed for dole denyed all Troye; Alle menyd my dethe, þe more and the lasse, And þus to bounte my body þai buriet in golde, Cladden me for þe curtest þat courte couthe þen holde, In mantyle for þe mekest and monlokest on bench, gurde me for þe gouernour and graythist of troye, furred me for þe fynest of fayth me wtinne. For þe honour of myn honeste of heghest enpryse þai coronyd me þe kidde kyng of kene justises þer euer wos tronyd in Troye oþer trawed euer shulde, And for I rewardid euer ryʒt þai raʒt me the septre.' þe bisshop baythes hym ʒet with bale at his hert, þaghe men mensked him so, how hit myʒt worthe þat his clothes were so clene. 'In cloutes, me þynkeʒ, Hom burde have rotid and bene rent in rattes longe syþen . þi body may be enbawmyd, hit bashis me noght þat hit thar ryve no rote ne no ronk wormeʒ; Bot þi colour ne þi clothe I know in no wyse How hit myʒt lye by monnes lore and last so longe.' 'Nay, bisshop,' quod þat body, 'enbawmyd wos I neuer, Ne no monnes counselle my cloth has keped vnwemmyd, Bot þe ryche kyng of resoun, þat ryʒt euer alowes And loves al þe lawes lelly þat longen to trawthe; And moste he menskes men for mynnynge of ryʒtes þen fr al þe meritorie medes þat men on molde vsen; And if renkes for ryʒt þus me arayed has, He has lent me to last þat loves ryʒt best.' 'ʒe, bot sayes þou of þi saule' þen sayd þe bisshop; 'Quere is ho stabled and stadde, if þou so streʒt wroʒteʒ? He þat rewardeʒ uche a renk as he has ryʒt serued Myʒt euel forgo the to gif of his grace summe braunche. For as he says in his sothe psalmyde writtes: þe scylful and þe vnskathely skelton ay to me. Forþi say me of þi saule, in sele quere ho woneʒ, And of þe ryche restorment þat raʒt hyr oure Lorde.' þen hummyd he þat þer lay and his hede waggyd, And gef a gronynge ful grete and to Godde sayde: 'Maʒty maker of men, thi myʒtes are grete; How myʒt þi mercy to me amount any tyme? Nas I a paynym vnpreste þat neuer thi plyt knewe, Ne þe mesure of þi mercy ne þi mukel vertue, Bot ay a freke faitheles þat fayled þi laghes þat euer þou, lorde, wos loued in? Allas þe harde stoundes! I was non of þe noumbre þat þou with nye boghtes With þe blod of thi body vpon þe blo rode. Quen þou herghdes helle hole and hentes hom þeroute, þi loffynge out of limbo, þou laftes me þer, And þer sittes my saule þat se may no fyrre, Dwynande in þe derke deth þat dyʒt vs oure fader, Adam oure alder, þat ete of þat appulle þat mony a plyʒtles peple has poysened for euer. ʒe were entouchid with his tethe and take in þe glette, Bot mendyd with a mendecyn ʒe are made for to lyue þat is fulloght in fonte with faythful bileve, And þat han we myst alle mercyles, myselfe and my saule. Quat wan we with oure wele dede þat wroʒten ay ryʒt, Quen we are dampnyd delfully into þe depe lake, And exilid fro þat soper so, þat solempne fest, þer richely hit arne refetyd þat after ryʒt hungride? My saule may sitte þer in sorʒe and sike ful colde, Dynly in þat derke dethe þer dawes neuer morn, Hungrie inwith helle hole, and herken after meeles Longe er ho þat soper se oþer segge hyr to lathe.' þus delfully þis dede body deuised hit sorʒe þat alle weped for woo þe wordes þat herde, And þe bysshop balefully bere doun his yʒen, þat hade no sace to speke, so spakly he ʒoskyd, Til he toke hym a tom and to þe toumbe loked, To þe liche þer hit lay, with lauande teres. 'Oure lorde lene', quod þat lede, 'þat þou lyf hades, By Goddes leue, as longe as I myʒt lach water, And cast vpon þi fayre corsand carp þes wordes, I folwe þe in þe Fader nome and his fre Childes And of þe gracious Holy Goste , and Not one grue lenger. þen þof þou dropped doun dede, hit daungerde me lasse.' With þat worde þat he warpped, þe wete of yʒen And teres trillyd adoun and on þe toumbe lyʒten, And one felle on his face, and þe freke syked. þen sayd he with a sadde soun: 'Oure sauyour be loued! Now hered be þou, hyʒe God, and þi hende Moder, And blessed be þat blyssful oure þat ho the bere in! And also be þou, bysshop, þe bote of my sorʒe And þe relefe of þe lodly lures þat my saule has levyed in! For þe wordes þat þou warp and þe water þat þou schedde, þe bryʒt bourne of þin yʒen, my bapteme is worþed. þe fyrst slent þat on me slode slekkyd al my tene; Ryʒt now to soper my saule is sette at þe table. For with þe wordes and þe water þat wesche vs of payne, lyʒtly lasshit þer a leme loghe in þe abyme þat spakly sprent my spyryt with vnsparid myrþe Into þe cenacle solemply þer suppe all trwe; And þer a marcialle hyr mette with menske alþer grattest, And with reverence a roum he raʒt hyr for euer. I heere þerof my hyʒe God and also þe, bysshop, Fro bale has broʒt vs to blys, blessid þou worthe!' Wyt this sesed his soun, sayd he no more, Bot sodenly his swete chere swyndid and fayled And all the ble of his body wos blake as þe moldeʒ, As roten as þe rottok þat ryses in powdere. For as sone as þe saule was sesed in blysse, coruppte was þat oþer crafte þat covert þe bones, For þe ay lastande lyf þat lethe shall neuer Devoydes uche a vayne gorie þat vayles so lyttel. þen wos lovynge oure lorde with loves vphalt, much mournyng and myrþe was mellyd togeder. þai passed forth in prosessyoun and alle þe peple folʒed, And all þe belles in þe burghe beryd at ones. <Transcribed by Jonathan Gerkin, Wheaton College> <Accent marks have been removed, and MMS spelling has been partially standardized with Cotton Nero A.x.> "

if useString == True:
    text = regText
    byteArr = map(ord, text)
else:
    # read the whole file into a byte array
    f = open(sys.argv[1], "rb")
    byteArr = map(ord, f.read())
    f.close()

fileSize = len(byteArr)
print 'File size in bytes:'
print fileSize
print

# calculate the frequency of each byte value in the file
freqList = []
for b in range(256):
    ctr = 0
    for byte in byteArr:
        if byte == b:
            ctr += 1
    freqList.append(float(ctr) / fileSize)
# print 'Frequencies of each byte-character:'
# print freqList
# print

# Shannon entropy
ent = 0.0
for freq in freqList:
    if freq > 0:
        ent = ent + freq * math.log(freq, 2)
ent = -ent
print 'Shannon entropy (min bits per byte-character):'
print ent
print
print 'Min possible file size assuming max theoretical compression efficiency:'
print (ent * fileSize), 'in bits'
print (ent * fileSize) / 8, 'in bytes'